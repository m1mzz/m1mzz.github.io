import{r as v,a as R,c as y,o as i,b as u,u as l,d as c,t as w,e as x,f as m,w as $,F as S,g as U,h as A,i as H,j as L,v as V,k as q,l as D,m as j,n as I,p as K}from"./vendor.fbce4e70.js";const W=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}};W();const C="57VV1UR4WCUQUNHG3RHZ8BI8WDY8YKPRHJ",b=e=>{(e==null?void 0:e.code)===4001?console.log("Please connect to MetaMask."):console.error(e)};let d;const g=()=>{"ethereum"in window&&(d=window.ethereum)};g();const B=async e=>{if(d)return await d.request({method:"eth_coinbase"}).catch(b);if(e)console.error("window.ethereum not found");else return g(),await B(!0)},F=e=>{const t=Number(e);return isNaN(t)?(console.error("Invalid hex string: "+e),0):t},E=e=>{if(!e)return 0;const t=e.toString();return parseFloat(t.slice(0,-18)+"."+t.slice(-18))},_=v(!1),p=R({address:"",eth:0,onx:0}),M=async e=>{const t=await fetch(`https://api-rinkeby.etherscan.io/api?module=account&action=tokenbalance&contractaddress=0xa0dff2d4462ec3b60a7ab6dfd5071a98751151d9&address=${e}&tag=latest&apikey=${C}`).catch(console.error);if((t==null?void 0:t.status)===200){const n=await t.json();if((n==null?void 0:n.status)==="1")return E(n.result)}return 0},Y=async e=>{const t=await d.request({method:"eth_getBalance",params:[e,"latest"]}).catch(b);return E(F(t))},N=async e=>{const[t,n]=await Promise.all([Y(e),M(e)]);p.eth=t,p.onx=n},G=async()=>{const e=await B();e&&(p.address=e,N(e),_.value=!0)},J=async()=>{if(!d&&(g(),!d)){console.error("window.ethereum not found");return}const[e]=await d.request({method:"eth_requestAccounts"}).catch(b)||[];e&&(p.address=e,N(e),_.value=!0)},Q=async e=>{const t=await fetch(`https://api-rinkeby.etherscan.io/api?module=account&action=txlist&address=${e}&startblock=0&endblock=99999999&sort=asc&apikey=${C}`).catch(console.error);if((t==null?void 0:t.status)===200){const n=await t.json();if((n==null?void 0:n.status)==="1")return n.result}return[]},X=async()=>{const e=await fetch("https://blockchain.info/ticker").catch(console.error);if((e==null?void 0:e.status)===200)return await e.json()};function k(){return _.value||G(),{isConnected:_,wallet:p,connect:J,getAllTransactions:Q,getBTC:X}}const Z={key:1},z={class:"text-xl"},ee={class:"text-right text-sm text-gray-500"},te={setup(e){const{isConnected:t,wallet:n,connect:o}=k(),s=y(()=>t.value?`${n.onx} ONX / ${n.eth} ETH`:""),r=y(()=>t.value?`${n.address.slice(0,5)}...${n.address.slice(-4)}`:"");return(a,h)=>(i(),u("div",null,[l(t)?(i(),u("div",Z,[c("div",z,w(l(s)),1),c("div",ee,w(l(r)),1)])):(i(),u("button",{key:0,onClick:h[0]||(h[0]=(...f)=>l(o)&&l(o)(...f))}," Connect wallet "))]))}},se={setup(e){const{getBTC:t}=k(),n=v(""),o=()=>{t().then(s=>{(s==null?void 0:s.USD)&&(n.value=s.USD.last+" "+s.USD.symbol)})};return o(),setInterval(o,15e3),(s,r)=>(i(),u("div",null," BTC: "+w(n.value),1))}},ne={class:"shadow"},oe={class:"container mx-auto flex items-center"},re=c("div",{class:"p-4"}," Home page ",-1),ae={class:"p-4 pl-10"},ce={class:"ml-auto p-4"},ie={setup(e){return(t,n)=>{const o=x("router-link");return i(),u("div",ne,[c("div",oe,[m(o,{to:"/"},{default:$(()=>[re]),_:1}),c("div",ae,[m(se)]),c("div",ce,[m(te)])])])}}},le={setup(e){return(t,n)=>{const o=x("router-view");return i(),u(S,null,[m(ie),m(o)],64)}}};const ue="modulepreload",P={},de="/",fe=function(t,n){return!n||n.length===0?t():Promise.all(n.map(o=>{if(o=`${de}${o}`,o in P)return;P[o]=!0;const s=o.endsWith(".css"),r=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${r}`))return;const a=document.createElement("link");if(a.rel=s?"stylesheet":ue,s||(a.as="script",a.crossOrigin=""),a.href=o,document.head.appendChild(a),s)return new Promise((h,f)=>{a.addEventListener("load",h),a.addEventListener("error",f)})})).then(()=>t())},he={class:"container mx-auto text-center"},me=D(" Show My Transactions "),pe=c("hr",null,null,-1),_e={class:"sm:flex p-4"},ve=["onKeyup"],ye=["disabled"],we={setup(e){const t=U(),{isConnected:n,wallet:o}=k(),s=v(""),r=y(()=>s.value.length<42),a=()=>{r.value||t.push({name:"transactions",params:{address:s.value}})};return(h,f)=>{const T=x("router-link");return i(),u("div",he,[c("div",null,[l(n)?(i(),A(T,{key:0,to:{name:"transactions",params:{address:l(o).address}}},{default:$(()=>[me]),_:1},8,["to"])):H("",!0)]),pe,c("div",_e,[L(c("input",{"onUpdate:modelValue":f[0]||(f[0]=O=>s.value=O),type:"text",name:"address",class:"border mr-4 max-w-full p-1",minlength:"42",length:"42",style:{width:"390px"},placeholder:"0x1331b9d038adaa4439f3a4c819ab0b6bf187d677",onKeyup:q(a,["enter"])},null,40,ve),[[V,s.value]]),c("button",{type:"button",disabled:l(r),class:"border px-4 bg-gray-100 rounded",onClick:a}," Show transactions ",8,ye)])])}}},xe=[{path:"/",name:"home",component:we},{path:"/address/:address",name:"transactions",component:()=>fe(()=>import("./PageTransactions.ff64a13b.js"),["assets/PageTransactions.ff64a13b.js","assets/vendor.fbce4e70.js"])}],be=j({history:I(),routes:xe});K(le).use(be).mount("#app");export{k as U};
